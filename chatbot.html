<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- font Awesome  gdn -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
        integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">

    <!-- My css file -->
    <link rel="stylesheet" type="text/css" href="./css/chatbox.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <title>Mask Cognizer</title>
</head>


<body>
<!-- Normal Mode interface -->

<div id="normalMode">
    <section id="chatbot">
        <div  class="container border" id="page-container">

            <div id="content-wrap">
                <div id="header" class="container-fluid">

                    <div class="row align-items-center h-100">
                        <div class="col-md-3 col-ms-3 col-3 text-center">
                            <a href="./index.html"><i class="fas fa-chevron-left"></i></a>
                        </div>
                        <div class="col-ms-6 col-md-6 col-6 text-center">
                            <h1>Chatbot</h1>
                        </div>
                        <div class="col-md-3 col-ms-3 col-3 text-center">
                            <a href="./setting.html"><i class="fas fa-cog"></i></a>
                        </div>
                    </div>
                </div>

                <div class="panel-body">
                    <div class="chats">

                        <div class="chat chat-left">
                            <div class="chat-body">
                                <div class="chat-content">
                                    <p>Hi, do you have any question about COVID-19? :)</p>
                                    <button onclick="textToSpeechConverter(this)"><i class="fas fa-volume-up"></i></button>
                                </div>
                            </div>
                        </div>

                        <div class="chat-body">
                            <div class="chat-content">
                                <p>Daily Hygiene Tips</p>
                            </div>
                        </div>

                        <div class="chat chat-left">
                            <div class="chat-body">
                                <div class="chat-content">
                                    <p class="audioText">Sleep tight, wash your hands and trim your nails</p>
                                    <button onclick="textToSpeechConverter(this)" style="border-width: 0;"><i class="fas fa-volume-up"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <footer id="footer" class="panel-footer">
                <div class="container-fluid">

                    <div class="row align-items-center h-100">

                        <div class="col-2 col-xs-1 col-sm-2 col-md-1 text-center">

                            <div class="btn-group dropup">
                                <button type="button" class="btn btn-secondary dropdown-toggle message" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-bars"></i>
                                </button>
                                <div class="dropdown-menu" id="dropdown-value">
                                    <a class="dropdown-item" id="displayText">Update News about COVID in HK</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" id="displayText">Daily Hygiene Tips</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" id="displayDate" 
                                        onclick="sendDate()" >Case(s) Today</a>
                                </div>
                            </div>
                        </div>

                        <div class="col-8 col-xs-10 col-sm-8 col-md-10 text-center">
                            <form>
                                <div class="input-group">
                                    <input type="text" class="form-control input-message" id="message"
                                        placeholder="Input Message here ......" value="">
                                    <span class="input-group-btn">
                                        <button class="btn btn-secondary" type="button"
                                            onclick="sendMessage()">Send</button>
                                    </span>
                                </div>
                            </form>
                        </div>

                        <div class="col-2 col-xs-1 col-sm-2 col-md-1 text-center">
                            <i class="fas fa-microphone btn-speech-to-text" id="btn-speech-to-text-start"></i>
                        </div>

                    </div>
                </div>
            </footer>



        </div>
    </section>

</div>


<!-- Elderly Mode interface -->
<div id='elderlyMode'>
    <section id="chatbot">
        <div  class="container border" id="page-container">

            <div id="content-wrap">
                <div id="header" class="container-fluid">

                    <div class="row align-items-center h-100">
                        <div class="col-md-3 col-ms-3 col-3 text-center">
                            <a href="./index.html"><i class="fas fa-chevron-left"></i></a>
                        </div>
                        <div class="col-ms-6 col-md-6 col-6 text-center">
                            <h1>Chatbot</h1>
                        </div>
                        <div class="col-md-3 col-ms-3 col-3 text-center">
                            <a href="./setting.html"><i class="fas fa-cog"></i></a>
                        </div>
                    </div>
                </div>

                <div class="panel-body">
                    <div class="chats">

                        <div class="chat chat-left">
                            <div class="chat-body">
                                <div class="chat-content">
                                    <p>Hi, do you have any question about COVID-19? :)</p>
                                    <button onclick="textToSpeechConverter(this)"><i class="fas fa-volume-up"></i></button>
                                </div>
                            </div>
                        </div>

                        <div class="chat-body">
                            <div class="chat-content">
                                <p>Daily Hygiene Tips</p>
                            </div>
                        </div>

                        <div class="chat chat-left">
                            <div class="chat-body">
                                <div class="chat-content">
                                    <p class="audioText">Sleep tight, wash your hands and trim your nails</p>
                                    <button onclick="textToSpeechConverter(this)" style="border-width: 0;"><i class="fas fa-volume-up"></i></button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>



            <footer id="footer" class="panel-footer">
                <div class="container">

                    <div class="row align-items-center h-100">

                        <div class="col-xs-2 col-sm-2 col-md-2 text-center">

                            <div class="btn-group dropup">
                                <button type="button" class="btn btn-secondary dropdown-toggle message" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-bars"></i>
                                </button>
                                <div class="dropdown-menu" id="dropdown-value">
                                    <a class="dropdown-item" id="displayText">Update News about COVID in HK</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" id="displayText">Daily Hygiene Tips</a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" id="displayDate" 
                                        onclick="sendDate()" >Case(s) Today</a>
                                </div>
                            </div>
                        </div>

                        <div class="col-xs-8 col-sm-8 col-md-8 text-center">
                            <button><i class="fas fa-microphone btn-elder-speech-to-text" id="btn-elder-speech-to-text-start"></i></button>
                            <!--
                            <form>
                                <div class="input-group">
                                    <input type="text" class="form-control input-message" id="message"
                                        placeholder="Input Message here ......" value="">
                                    <span class="input-group-btn">
                                        <button class="btn btn-secondary" type="button"
                                            onclick="sendMessage()">Send</button>
                                    </span>
                                </div>
                            </form>
                            -->
                        </div>

                        <div class="col-xs-2 col-sm-2 col-md-2 text-center">
                            <a href="./setting.html"><i class="fas fa-cog"></i></a>
                        </div>

                    </div>
                </div>
            </footer>



        </div>
    </section>
</div>

        <div class="chat-bot-audio-container">
            <audio id="speechBase64" controls autoplay src=""></audio>
        </div>
        <script src="https://sdk.amazonaws.com/js/aws-sdk-2.283.1.min.js"></script>
        <script src="js/Lex-chatbot.js"></script>
        <script src="js/TextToSpeech.js"></script>
        <script src="js/SpeechRecognitionAPI.js"></script>

        <script src="js/modeChange.js"></script>

        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>



        <script>
                $(document).ready(function () {
                    $('#dropdown-value #displayText').on('click', function () {
                        var txt= ($(this).text());
                        document.getElementById("message").value = (txt);
                        (sessionStorage.getItem("mode") == "Elder") ? sendElderMessage(txt): 
                        document.getElementById("message").onclick(sendMessage());
                    });

                    n =  new Date();
                    y = n.getFullYear();
                    m = n.getMonth() + 1;
                    d = n.getDate();

                    $('#dropdown-value #displayDate').on('click', function () {
                    var txt= ($(this).text());
                    var txt =  m + "/" + d + "/" + y;
                    document.getElementById("message").value = (txt);
                    document.getElementById("message").onclick(sendMessage());
                });

                });
        </script>



        <!--  Display basic on the selected mode  -->
        <script>   
            $(document).ready(function() {

                //alert(sessionStorage.getItem("mode"));   

                if (sessionStorage.getItem("mode") === "Normal" || sessionStorage.getItem("mode") === null) {
                    // display Normal mode
                    document.getElementById("normalMode").style.display = "block";
                    document.getElementById("elderlyMode").style.display = "none";
                } else {
                    // display Elder mode
                    document.getElementById("normalMode").style.display = "none";
                    document.getElementById("elderlyMode").style.display = "block";
                }
            });
        </script>






    </body>

</html>